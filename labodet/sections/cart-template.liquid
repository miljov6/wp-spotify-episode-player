{%- comment -%}
//    !!!! - DO NOT MODIFY - !!!!
//    THIS FILE IS DEPLOYED AUTOMATICALLY BY MATTv2.
//    CHANGES YOU MAKE MAY BE AUTOMATICALLY OVERWRITTEN AT ANY TIME.
//
//    Deployment info:
//      Updated at:     2021-03-17T17:51:09+00:00
//      Cause:          Manual deployment.
//      Deployment ID:  120105
//      Project:        339
//      Environment:    741 - master
//      MD5:            2b08f73953591a386a3ad976a0a8732d
//      Signature:      eyJpdiI6IndqN0QxVGxaTDh5OStBaGp5TXJHSmc9PSIsInZhbHVlIjoiVzZ1aGM3Y1lCTEN1Vjh5T0ZndGJEWUZrZm9yaE5mUDdXSkNhQW42NFdDOGhjXC9zWEZ2bFwvNkxqazVXc1k5aFFId2RhRVFFODZtQ0I1TjQ3dTFtam01NmVNdFVJYSs4TEYzZm8wdlNaQUpxVFk1Smx0QWY2REdMNlpCbTVBK0tkS0JBMkp6cmp6NlpTU1pZTkFhS25JNlJDNjdHQ0grQnFSN1c5bWc1YXdNSGR0NytCZm41ZGdQOXFPTEJuTFRiQjJ5TzhiTElvYkJkbisxUmhhazVUalFFRkxcL1ZadXNQeVwvNDY5Y2VCbElMaW85WjNqVThOZDRRWnljRXlWUHJJNFgxVlFoZGxwem9kRFBNV2FKUmR1cTE0WWV1bWpOQ0FiZUlGOXJoYkNPZnZCbFZ4SlwvT0c4TFJud2hpSlRYRUh1UHZmb1Q4QStNR29hRTFmRHBkMzlrZU5SUCt3SldFRU1iSVRnSnVqYTRiOTdBUjhIRUcrZHJUYmJNQ0V1ZTBZcUZIWnFCRTZockQ4Tnk3M3NUc0wxMkNBPT0iLCJtYWMiOiJkZmM5MmVjNjJiMDE4MTMxODU0OWNiZGJhODVkNzU0ZTNkYWQwMTFiYjQ4NzMwNzkwNzQ4NjA4NDMwODNhODYyIn0=
//
//    MATT is an automated theme deployment pipeline for Shopify, built by Eastside Co.
//    It is used to provide version control and reliable deployment environments.
//
//    If you need to modify this file, please contact Eastside Co.
{%- endcomment -%}
<div class="container" data-section-id="{{ section.id }}" data-section-type="cart-template">

  {% if cart.item_count > 0 %}
    <div class="section-header text-center">
      <h1>{{ 'cart.general.title' | t }}</h1>
    </div>

    <form action="/cart" method="post" novalidate class="cart">
      <table>
        <thead class="cart__row cart__header">
          <th colspan="2">{{ 'cart.label.product' | t }}</th>
          <th>{{ 'cart.label.price' | t }}</th>
          <th class="text-center">{{ 'cart.label.quantity' | t }}</th>
          <th class="text-right">{{ 'cart.label.total' | t }}</th>
        </thead>
        <tbody>
          {% for item in cart.items %}
            <tr class="cart__row border-bottom line{{ forloop.index }} cart-flex{% if forloop.first %} border-top{% endif %}">
              <td class="cart__image-wrapper cart-flex-item">
                <a href="{{ item.url | within: collections.all }}">
                  <img class="cart__image" src="{{ item | img_url: '100x' }}" alt="{{ item.title | escape }}">
                </a>
                
                {% for discount_allocation in item. discount_allocations %}
  					amount: {{ discount_allocation.amount  }}
  					Savings: -{{ discount_allocation.discount_application  | money_without_trailing_zeros }}
				{% endfor %}
              </td>
              <td class="cart__meta small--text-left cart-flex-item">
                <div class="list-view-item__title">
                  <a href="{{ item.url }}">
                    {{ item.product.title }}
                    <span class="saso-cart-item-discount-notes" data-key="{{item.key}}"></span>
                    <span class="saso-cart-item-upsell-notes" data-key="{{item.key}}"></span>                                
                                
                    {% if item.quantity > 1 %}
                      <span class="medium-up--hide"><span class="visually-hidden">{{ 'cart.label.quantity' | t }}</span>(x{{ item.quantity }})</span>
                    {% endif %}
                  </a>
                </div>
                {% unless item.variant.title contains 'Default' %}
                  <div class="cart__meta-text">
                    {% for option in item.product.options %}
                      {{ option }}: {{ item.variant.options[forloop.index0] }}</br>
                    {% endfor %}
                  </div>
                {% endunless %}

                {% comment %}
                  Optional, loop through custom product line items if available

                  Line item properties come in as having two parts. The first part will be passed with the default form,
                  but p.last is the actual custom property and may be blank. If it is, don't show it.

                  For more info on line item properties, visit:
                    - http://docs.shopify.com/support/your-store/products/how-do-I-collect-additional-information-on-the-product-page-Like-for-a-monogram-engraving-or-customization
                {% endcomment %}
                {%- assign property_size = item.properties | size -%}
                {% if property_size > 0 %}
                  <div class="cart__meta-text">
                    {% for p in item.properties %}
                      {% unless p.last == blank %}
                        {{ p.first }}:

                        {% comment %}
                          Check if there was an uploaded file associated
                        {% endcomment %}
                        {% if p.last contains '/uploads/' %}
                          <a href="{{ p.last }}">{{ p.last | split: '/' | last }}</a>
                        {% else %}
                          {{ p.last }}
                        {% endif %}
                      {% endunless %}
                    {% endfor %}
                  </div>
                {% endif %}

                <p class="small--hide">
                  <a href="/cart/change?line={{ forloop.index }}&amp;quantity=0" class="btn btn--small btn--secondary cart__remove">{{ 'cart.general.remove' | t }}</a>
                </p>
              </td>
              <td class="cart__price-wrapper cart-flex-item">
                
                <div><s>{{ item.variant.compare_at_price | money_without_trailing_zeros }}</s></div>
				<span style="color: red" class="saso-cart-item-price" data-key="{{item.key}}">{{ item.price | money_without_trailing_zeros }}</span>

                {% for discount in item.discounts %}
                  <div class="cart-item__discount medium-up--hide">{{ discount.title }}</div>
                {% endfor %}

                <div class="cart__edit medium-up--hide">
                  <button type="button" class="btn btn--secondary btn--small js-edit-toggle cart__edit--active" data-target="line{{ forloop.index }}">
                    <span class="cart__edit-text--edit">{{ 'cart.general.edit' | t }}</span>
                    <span class="cart__edit-text--cancel">{{ 'cart.general.cancel' | t }}</span>
                  </button>
                </div>
              </td>
              <td class="cart__update-wrapper cart-flex-item text-right">
                <a href="/cart/change?line={{ forloop.index }}&amp;quantity=0" class="btn btn--small btn--secondary cart__remove medium-up--hide">{{ 'cart.general.remove' | t }}</a>
                <div class="cart__qty">
                  <label for="updates_{{ item.key }}" class="cart__qty-label">{{ 'cart.label.quantity' | t }}</label>
                  <input type="button" value="-" id="cart-minus">
                  <input class="cart__qty-input" type="number" name="updates[]" id="updates_{{ item.key }}" value="{{ item.quantity }}" min="0" pattern="[0-9]*">
                  <input type="button" value="+" id="cart-plus">
                </div>
                <input type="submit" name="update" class="btn btn--small cart__update medium-up--hide" value="{{ 'cart.general.update' | t }}">
              </td>
              <td class="text-right small--hide">
                {% if item.original_line_price != item.line_price %}
                  <div class="cart-item__original-price"><s>{{ item.original_line_price | money_without_trailing_zeros }}</s></div>
                {% endif %}

                <div>
                  <s>
                    {% capture originalprice %}{{ item.variant.compare_at_price | times: item.quantity }}{% endcapture %}
					{% assign total_originalprice = originalprice | plus: total_saving %}
                    {{ total_originalprice | money_without_trailing_zeros }}
                  </s>
                </div>
                
                <div><span style="color: red" class="saso-cart-item-line-price" data-key="{{item.key}}">{{ item.line_price | money_without_trailing_zeros }}</span></div>

                {% for discount in item.discounts %}
                  <div class="cart-item__discount">{{ discount.title }}</div>
                {% endfor %}
              </td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
      <footer class="cart__footer">
        <div class="grid">
          {% if section.settings.cart_notes_enable %}
            <div class="grid__item medium-up--one-half cart-note">
              <label for="CartSpecialInstructions" class="cart-note__label small--text-center">{{ 'cart.general.note' | t }}</label>
              <textarea name="note" id="CartSpecialInstructions" class="cart-note__input">{{ cart.note }}</textarea>
            </div>
          {% endif %}
          <div class="grid__item text-right small--text-center{% if section.settings.cart_notes_enable %} medium-up--one-half{% endif %}">
            <div style="margin-bottom: 15px;">
<!--               <span class="cart__subtotal-title"><span id="bk-cart-subtotal-label">{{ 'cart.general.subtotal' | t }}</span></span> -->
<!--               <span class="cart__subtotal"></span> -->
              <table class="cart__table-total">
                <tr>
                  <td><span class="cart__subtotal-title"><span id="bk-cart-subtotal-label">{{ 'cart.general.savings' | t }}</span>:</span></td>
                  <td>
                  	{% assign total_saving = 0 %}
                    {% for item in cart.items %}
                      {% if item.variant.compare_at_price > item.variant.price %}
                        {% capture saving %}{{ item.variant.compare_at_price | minus: item.variant.price | times: item.quantity }}{% endcapture %}
                        {% assign total_saving = saving | plus: total_saving %}
                      {% endif %} 
                    {% endfor %} 
                    <span style="color: green">{{ total_saving | money_without_trailing_zeros }}</span>
                  </td>
                </tr>
                <tr>
                  {% comment %}
                  <td><span class="cart__subtotal-title">Total:</span></td>
                  {% endcomment %}
                  <td><span class="cart__subtotal-title"><span id="bk-cart-subtotal-label">{{ 'cart.general.subtotal' | t }}</span>:</span></td>
                  <td><span class="saso-cart-original-total"><span id="bk-cart-subtotal-price">{{ cart.total_price | money_without_trailing_zeros }}</span></span></td>
                </tr>
                
                <tr>
                  <td></td>
                  {% comment %}
                  <td><span class="cart__subtotal-title"><span id="bk-cart-subtotal-label">{{ 'cart.general.subtotal' | t }}</span>:</span></td>
                  {% endcomment %}
                  <td><span class="saso-cart-total"><span class="saso-cart-original-total"><span id="bk-cart-subtotal-price">{{ cart.total_price | money_without_trailing_zeros }}</span></span></span></td>
                </tr>
              </table>
            </div>
            {% if cart.total_discounts > 0 %}
              <div class="cart__savings">
                {{ 'cart.general.savings' | t }}
                <span class="cart__savings-amount">{{ cart.total_discounts | money_without_trailing_zeros }}</span>
              </div>
            {% endif %}
            <div class="cart__shipping1">
            <a href="collections/all" class="btn btn--secondary cart__update cart__continue--large small--hide" >{{ 'cart.general.continue_shopping' | t }}</a>
            <input type="submit" name="update" class="btn btn--secondary cart__update cart__update--large small--hide" value="{{ 'cart.general.update' | t }}">
            <input type="submit" name="checkout" class="btn btn--small-wide" value="{{ 'cart.general.checkout' | t }}">
            <!--<div class="cart__shipping">{{ 'cart.general.shipping_at_checkout' | t }}</div>-->
            </div>
           
              {% if additional_checkout_buttons %}
                <div class="additional-checkout-buttons">
                  {{ content_for_additional_checkout_buttons }}
            	</div>
              {% endif %}
          </div>
        </div>
      </footer>

{% for discount_application in cart.discount_applications %}
  Discount name: {{ discount_application.title }}
  Savings: -{{ discount_application.total_allocated_amount | money_without_trailing_zeros }}
{% endfor %}

{% for discount_application in cart.cart_level_discount_applications %}
  Discount name: {{ discount_application.title }}
  Savings: -{{ discount_application.total_allocated_amount | money_without_trailing_zeros }}
{% endfor %}

      <div class="discount-code-field"> 
          <label for="discount">Discount Code</label> 
          <input autocomplete="off" type="text" name="discount" /> 
      </div> 
    </form>
  {% else %}
    <div class="empty-page-content text-center">
      <h1>{{ 'cart.general.title' | t }}</h1>
      <p>{{ 'cart.general.empty' | t }}</p>
      <a href="/" class="btn btn--has-icon-after">{{ 'general.404.link' | t }}{% include 'icon-arrow-right' %}</a>
    </div>
  {% endif %}
</div>

{% schema %}
  {
    "name": "Cart page",
    "settings": [
      {
        "type": "checkbox",
        "id": "cart_notes_enable",
        "label": "Enable cart notes",
        "default": false
      }
    ]
  }
{% endschema %}